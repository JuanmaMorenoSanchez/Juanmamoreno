(self.webpackChunkjuanmamoreno=self.webpackChunkjuanmamoreno||[]).push([[932],{8932:(N,S,b)=>{"use strict";b.r(S),b.d(S,{AlchemyWebSocketProvider:()=>se});var r=b(9287),B=b(3488),O=b(2935),C=b(2492),k=b(4325),R=b(1210),w=b(8666),c=b(9802);let i=null;try{if(i=WebSocket,null==i)throw new Error("inject please")}catch{const e=new w.Yd(c.i);i=function(){e.throwError("WebSockets not supported in this environment",w.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var l=function(a,e,t,s){return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(m){u(m)}}function f(v){try{p(s.throw(v))}catch(m){u(m)}}function p(v){v.done?o(v.value):function n(o){return o instanceof t?o:new t(function(u){u(o)})}(v.value).then(d,f)}p((s=s.apply(a,e||[])).next())})};const h=new w.Yd(c.i);let E=1;class T extends R.r{constructor(e,t){"any"===t&&h.throwError("WebSocketProvider does not support 'any' network yet",w.Yd.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,(0,k.zG)(this,"_websocket","string"==typeof e?new i(this.connection.url):e),(0,k.zG)(this,"_requests",{}),(0,k.zG)(this,"_subs",{}),(0,k.zG)(this,"_subIds",{}),(0,k.zG)(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(n=>{this.websocket.send(this._requests[n].payload)})},this.websocket.onmessage=n=>{const o=n.data,u=JSON.parse(o);if(null!=u.id){const d=String(u.id),f=this._requests[d];if(delete this._requests[d],void 0!==u.result)f.callback(null,u.result),this.emit("debug",{action:"response",request:JSON.parse(f.payload),response:u.result,provider:this});else{let p=null;u.error?(p=new Error(u.error.message||"unknown error"),(0,k.zG)(p,"code",u.error.code||null),(0,k.zG)(p,"response",o)):p=new Error("unknown error"),f.callback(p,void 0),this.emit("debug",{action:"response",error:p,request:JSON.parse(f.payload),provider:this})}}else if("eth_subscription"===u.method){const d=this._subs[u.params.subscription];d&&d.processFunc(u.params.result)}else console.warn("this should not happen")};const s=setInterval(()=>{this.emit("poll")},1e3);s.unref&&s.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){h.throwError("cannot reset events block on WebSocketProvider",w.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){h.throwError("cannot set polling interval on WebSocketProvider",w.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return l(this,void 0,void 0,function*(){return null})}set polling(e){!e||h.throwError("cannot set polling on WebSocketProvider",w.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const s=E++;return new Promise((n,o)=>{const d=JSON.stringify({method:e,params:t,id:s,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(d),provider:this}),this._requests[String(s)]={callback:function u(f,p){return f?o(f):n(p)},payload:d},this._wsReady&&this.websocket.send(d)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,s){return l(this,void 0,void 0,function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then(u=>this.send("eth_subscribe",u)),this._subIds[e]=n);const o=yield n;this._subs[o]={tag:e,processFunc:s}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const s=O.O$.from(t.number).toNumber();this._emitted.block=s,this.emit("block",s)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=s=>{const n=s.hash;this.getTransactionReceipt(n).then(o=>{!o||this.emit(n,o)})};t(e),this._subscribe("tx",["newHeads"],s=>{this._events.filter(n=>"tx"===n.type).forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter(n=>"tx"===n.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;const s=this._subIds[t];!s||(delete this._subIds[t],s.then(n=>{!this._subs[n]||(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}destroy(){return l(this,void 0,void 0,function*(){this.websocket.readyState===i.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var g=b(4560);b(3014);class J{constructor(e){this.provider=e,this.maxBackfillBlocks=120}getNewHeadsBackfill(e,t,s){return(0,r._)(this,void 0,void 0,function*(){I(e);const n=yield this.getBlockNumber();if(I(e),0===t.length)return this.getHeadEventsInRange(Math.max(s,n-this.maxBackfillBlocks)+1,n+1);const o=(0,r.f)(t[t.length-1].number),u=n-this.maxBackfillBlocks+1;if(o<=u)return this.getHeadEventsInRange(u,n+1);const d=yield this.getReorgHeads(e,t);I(e);const f=yield this.getHeadEventsInRange(o+1,n+1);return I(e),[...d,...f]})}getLogsBackfill(e,t,s,n){return(0,r._)(this,void 0,void 0,function*(){I(e);const o=yield this.getBlockNumber();if(I(e),0===s.length)return this.getLogsInRange(t,Math.max(n,o-this.maxBackfillBlocks)+1,o+1);const u=(0,r.f)(s[s.length-1].blockNumber),d=o-this.maxBackfillBlocks+1;if(u<d)return this.getLogsInRange(t,d,o+1);const f=yield this.getCommonAncestor(e,s);I(e);const p=s.filter(y=>(0,r.f)(y.blockNumber)>f.blockNumber).map(y=>Object.assign(Object.assign({},y),{removed:!0})),v=f.blockNumber===Number.NEGATIVE_INFINITY?(0,r.f)(s[0].blockNumber):f.blockNumber;let m=yield this.getLogsInRange(t,v,o+1);return m=m.filter(y=>y&&((0,r.f)(y.blockNumber)>f.blockNumber||(0,r.f)(y.logIndex)>f.logIndex)),I(e),[...p,...m]})}setMaxBackfillBlock(e){this.maxBackfillBlocks=e}getBlockNumber(){return(0,r._)(this,void 0,void 0,function*(){const e=yield this.provider.send("eth_blockNumber");return(0,r.f)(e)})}getHeadEventsInRange(e,t){return(0,r._)(this,void 0,void 0,function*(){if(e>=t)return[];const s=[];for(let o=e;o<t;o++)s.push({method:"eth_getBlockByNumber",params:[(0,r.t)(o),!1]});return(yield this.provider.sendBatch(s)).map(U)})}getReorgHeads(e,t){return(0,r._)(this,void 0,void 0,function*(){const s=[];for(let n=t.length-1;n>=0;n--){const o=t[n],u=yield this.getBlockByNumber((0,r.f)(o.number));if(I(e),o.hash===u.hash)break;s.push(U(u))}return s.reverse()})}getBlockByNumber(e){return(0,r._)(this,void 0,void 0,function*(){return this.provider.send("eth_getBlockByNumber",[(0,r.t)(e),!1])})}getCommonAncestor(e,t){return(0,r._)(this,void 0,void 0,function*(){let s=yield this.getBlockByNumber((0,r.f)(t[t.length-1].blockNumber));I(e);for(let n=t.length-1;n>=0;n--){const o=t[n];if(o.blockNumber!==s.number&&(s=yield this.getBlockByNumber((0,r.f)(o.blockNumber))),o.blockHash===s.hash)return{blockNumber:(0,r.f)(o.blockNumber),logIndex:(0,r.f)(o.logIndex)}}return{blockNumber:Number.NEGATIVE_INFINITY,logIndex:Number.NEGATIVE_INFINITY}})}getLogsInRange(e,t,s){return(0,r._)(this,void 0,void 0,function*(){if(t>=s)return[];const n=Object.assign(Object.assign({},e),{fromBlock:(0,r.t)(t),toBlock:(0,r.t)(s-1)});return this.provider.send("eth_getLogs",[n])})}}function U(a){const e=Object.assign({},a);return delete e.totalDifficulty,delete e.transactions,delete e.uncles,e}function K(a,e){const t=new Set,s=[];return a.forEach(n=>{const o=e(n);t.has(o)||(t.add(o),s.push(n))}),s}const Q=new Error("Cancelled");function I(a){if(a())throw Q}class se extends T{constructor(e,t){var s;const n=g.AlchemyProvider.getApiKey(e.apiKey),o=g.AlchemyProvider.getAlchemyNetwork(e.network),u=g.AlchemyProvider.getAlchemyConnectionInfo(o,n,"wss");super(new B.Z(null!==(s=e.url)&&void 0!==s?s:u.url,`alchemy-sdk-${r.V}`,{wsConstructor:t??(typeof process<"u"&&null!=process&&null!=process.versions&&null!=process.versions.node?b(2762).w3cwebsocket:WebSocket)}),r.E[o]),this._events=[],this.virtualSubscriptionsById=new Map,this.virtualIdsByPhysicalId=new Map,this.handleMessage=v=>{const m=JSON.parse(v.data);if(!function he(a){return!function ae(a){return Array.isArray(a)||"2.0"===a.jsonrpc&&void 0!==a.id}(a)}(m))return;const y=m.params.subscription,_=this.virtualIdsByPhysicalId.get(y);if(!_)return;const H=this.virtualSubscriptionsById.get(_);if("eth_subscribe"===H.method)switch(H.params[0]){case"newHeads":{const P=H,j=m,{isBackfilling:M,backfillBuffer:G}=P,{result:A}=j.params;M?function de(a,e){D(a,e,x)}(G,A):y!==_?this.emitAndRememberEvent(_,A,x):this.rememberEvent(_,A,x);break}case"logs":{const P=H,j=m,{isBackfilling:M,backfillBuffer:G}=P,{result:A}=j.params;M?function fe(a,e){D(a,e,W)}(G,A):_!==y?this.emitAndRememberEvent(_,A,W):this.rememberEvent(_,A,W);break}default:if(y!==_){const{result:P}=m.params;this.emitEvent(_,P)}}},this.handleReopen=()=>{this.virtualIdsByPhysicalId.clear();const{cancel:v,isCancelled:m}=function re(){let a=!1;return{cancel:()=>a=!0,isCancelled:()=>a}}();this.cancelBackfill=v;for(const y of this.virtualSubscriptionsById.values())(0,r._)(this,void 0,void 0,function*(){try{yield this.resubscribeAndBackfill(m,y)}catch(_){m()||console.error(`Error while backfilling "${y.params[0]}" subscription. Some events may be missing.`,_)}});this.startHeartbeat()},this.stopHeartbeatAndBackfill=()=>{null!=this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.cancelBackfill()},this.apiKey=n,this.backfiller=new J(this),this.addSocketListeners(),this.startHeartbeat(),this.cancelBackfill=r.n}static getNetwork(e){return"string"==typeof e&&e in r.C?r.C[e]:(0,C.H)(e)}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}off(e,t){return(0,r.i)(e)?this._off(e,t):super.off(e,t)}removeAllListeners(e){return void 0!==e&&(0,r.i)(e)?this._removeAllListeners(e):super.removeAllListeners(e)}listenerCount(e){return void 0!==e&&(0,r.i)(e)?this._listenerCount(e):super.listenerCount(e)}listeners(e){return void 0!==e&&(0,r.i)(e)?this._listeners(e):super.listeners(e)}_addEventListener(e,t,s){if((0,r.i)(e)){(0,r.v)(e);const n=new r.c((0,r.e)(e),t,s);return this._events.push(n),this._startEvent(n),this}return super._addEventListener(e,t,s)}_startEvent(e){[...r.A,"block","filter"].includes(e.type)?this.customStartEvent(e):super._startEvent(e)}_subscribe(e,t,s,n){return(0,r._)(this,void 0,void 0,function*(){let o=this._subIds[e];const u=yield this.getBlockNumber();null==o&&(o=Promise.all(t).then(p=>this.send("eth_subscribe",p)),this._subIds[e]=o);const d=yield o,f=yield Promise.all(t);this.virtualSubscriptionsById.set(d,{event:n,method:"eth_subscribe",params:f,startingBlockNumber:u,virtualId:d,physicalId:d,sentEvents:[],isBackfilling:!1,backfillBuffer:[]}),this.virtualIdsByPhysicalId.set(d,d),this._subs[d]={tag:e,processFunc:s}})}emit(e,...t){if((0,r.i)(e)){let s=!1;const n=[],o=(0,r.e)(e);return this._events=this._events.filter(u=>u.tag!==o||(setTimeout(()=>{u.listener.apply(this,t)},0),s=!0,!u.once||(n.push(u),!1))),n.forEach(u=>{this._stopEvent(u)}),s}return super.emit(e,...t)}sendBatch(e){return(0,r._)(this,void 0,void 0,function*(){let t=0;const s=e.map(({method:n,params:o})=>({method:n,params:o,jsonrpc:"2.0",id:"alchemy-sdk:"+t++}));return this.sendBatchConcurrently(s)})}destroy(){return this.removeSocketListeners(),this.stopHeartbeatAndBackfill(),super.destroy()}isCommunityResource(){return this.apiKey===r.D}_stopEvent(e){let t=e.tag;if(r.A.includes(e.type)){if(this._events.filter(n=>r.A.includes(n.type)).length)return}else if("tx"===e.type){if(this._events.filter(n=>"tx"===n.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;const s=this._subIds[t];!s||(delete this._subIds[t],s.then(n=>{!this._subs[n]||(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}addSocketListeners(){this._websocket.addEventListener("message",this.handleMessage),this._websocket.addEventListener("reopen",this.handleReopen),this._websocket.addEventListener("down",this.stopHeartbeatAndBackfill)}removeSocketListeners(){this._websocket.removeEventListener("message",this.handleMessage),this._websocket.removeEventListener("reopen",this.handleReopen),this._websocket.removeEventListener("down",this.stopHeartbeatAndBackfill)}resubscribeAndBackfill(e,t){return(0,r._)(this,void 0,void 0,function*(){const{virtualId:s,method:n,params:o,sentEvents:u,backfillBuffer:d,startingBlockNumber:f}=t;t.isBackfilling=!0,d.length=0;try{const p=yield this.send(n,o);switch(I(e),t.physicalId=p,this.virtualIdsByPhysicalId.set(p,s),o[0]){case"newHeads":{const v=yield V(()=>F(this.backfiller.getNewHeadsBackfill(e,u,f),6e4),5,()=>!e());I(e),function X(a){return K(a,e=>e.hash)}([...v,...d]).forEach(y=>this.emitNewHeadsEvent(s,y));break}case"logs":{const v=o[1]||{},m=yield V(()=>F(this.backfiller.getLogsBackfill(e,v,u,f),6e4),5,()=>!e());I(e),function Z(a){return K(a,e=>`${e.blockHash}/${e.logIndex}`)}([...m,...d]).forEach(_=>this.emitLogsEvent(s,_));break}}}finally{t.isBackfilling=!1,d.length=0}})}emitNewHeadsEvent(e,t){this.emitAndRememberEvent(e,t,x)}emitLogsEvent(e,t){this.emitAndRememberEvent(e,t,W)}emitAndRememberEvent(e,t,s){this.rememberEvent(e,t,s),this.emitEvent(e,t)}emitEvent(e,t){const s=this.virtualSubscriptionsById.get(e);!s||this.emitGenericEvent(s,t)}rememberEvent(e,t,s){const n=this.virtualSubscriptionsById.get(e);!n||D(n.sentEvents,Object.assign({},t),s)}emitGenericEvent(e,t){this.emitProcessFn(e.event)(t)}startHeartbeat(){null==this.heartbeatIntervalId&&(this.heartbeatIntervalId=setInterval(()=>(0,r._)(this,void 0,void 0,function*(){try{yield F(this.send("net_version"),1e4)}catch{this._websocket.reconnect()}}),3e4))}sendBatchConcurrently(e){return(0,r._)(this,void 0,void 0,function*(){return Promise.all(e.map(t=>this.send(t.method,t.params)))})}customStartEvent(e){if(e.type===r.h){const{fromAddress:t,toAddress:s,hashesOnly:n}=e;this._subscribe(e.tag,[r.j.PENDING_TRANSACTIONS,{fromAddress:t,toAddress:s,hashesOnly:n}],this.emitProcessFn(e),e)}else if(e.type===r.k){const{addresses:t,includeRemoved:s,hashesOnly:n}=e;this._subscribe(e.tag,[r.j.MINED_TRANSACTIONS,{addresses:t,includeRemoved:s,hashesOnly:n}],this.emitProcessFn(e),e)}else"block"===e.type?this._subscribe("block",["newHeads"],this.emitProcessFn(e),e):"filter"===e.type&&this._subscribe(e.tag,["logs",this._getFilter(e.filter)],this.emitProcessFn(e),e)}emitProcessFn(e){switch(e.type){case r.h:return t=>this.emit({method:r.j.PENDING_TRANSACTIONS,fromAddress:e.fromAddress,toAddress:e.toAddress,hashesOnly:e.hashesOnly},t);case r.k:return t=>this.emit({method:r.j.MINED_TRANSACTIONS,addresses:e.addresses,includeRemoved:e.includeRemoved,hashesOnly:e.hashesOnly},t);case"block":return t=>{const s=O.O$.from(t.number).toNumber();this._emitted.block=s,this.emit("block",s)};case"filter":return t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))};default:throw new Error("Invalid event type to `emitProcessFn()`")}}_off(e,t){if(null==t)return this.removeAllListeners(e);const s=[];let n=!1;const o=(0,r.e)(e);return this._events=this._events.filter(u=>!(u.tag===o&&u.listener==t&&!n&&(n=!0,s.push(u),1))),s.forEach(u=>{this._stopEvent(u)}),this}_removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const s=(0,r.e)(e);this._events=this._events.filter(n=>n.tag!==s||(t.push(n),!1))}return t.forEach(s=>{this._stopEvent(s)}),this}_listenerCount(e){if(!e)return this._events.length;const t=(0,r.e)(e);return this._events.filter(s=>s.tag===t).length}_listeners(e){if(null==e)return this._events.map(s=>s.listener);const t=(0,r.e)(e);return this._events.filter(s=>s.tag===t).map(s=>s.listener)}}function V(a,e,t=(()=>!0)){return(0,r._)(this,void 0,void 0,function*(){let s=0,n=0;for(;;)try{return yield a()}catch(o){if(n++,n>=e||!t(o)||(yield ue(s),!t(o)))throw o;s=0===s?1e3:Math.min(3e4,2*s)}})}function ue(a){return new Promise(e=>setTimeout(e,a))}function F(a,e){return Promise.race([a,new Promise((t,s)=>setTimeout(()=>s(new Error("Timeout")),e))])}function x(a){return(0,r.f)(a.number)}function W(a){return(0,r.f)(a.blockNumber)}function D(a,e,t){const s=t(e),n=a.findIndex(o=>t(o)>s-10);-1===n?a.length=0:a.splice(0,n),a.push(e)}},8878:N=>{var S=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};N.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return S()}try{return __global__||S()}finally{delete Object.prototype.__global__}}()},3488:(N,S)=>{"use strict";var O=function(){function c(i,l,h){if(void 0===h&&(h={}),this.url=i,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=c.CONNECTING,this.OPEN=c.OPEN,this.CLOSING=c.CLOSING,this.CLOSED=c.CLOSED,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},null==l||"string"==typeof l||Array.isArray(l)?this.protocols=l:h=l,this.options=function C(c){var i={};return Object.keys(O.DEFAULT_OPTIONS).forEach(function(l){var h=c[l];i[l]=void 0===h?O.DEFAULT_OPTIONS[l]:h}),i}(h),!this.options.wsConstructor){if(!(typeof WebSocket<"u"))throw new Error("WebSocket not present in global scope and no wsConstructor option was provided.");this.options.wsConstructor=WebSocket}this.openNewWebSocket()}return Object.defineProperty(c.prototype,"binaryType",{get:function(){return this.binaryTypeInternal||"blob"},set:function(i){this.binaryTypeInternal=i,this.ws&&(this.ws.binaryType=i)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bufferedAmount",{get:function(){var i=this.ws?this.ws.bufferedAmount:0,l=!1;return this.messageBuffer.forEach(function(h){var E=function k(c){return"string"==typeof c?2*c.length:c instanceof ArrayBuffer?c.byteLength:c instanceof Blob?c.size:void 0}(h);null!=E?i+=E:l=!0}),l&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),i},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"extensions",{get:function(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"protocol",{get:function(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"readyState",{get:function(){return this.isClosed?c.CLOSED:c.OPEN},enumerable:!0,configurable:!0}),c.prototype.close=function(i,l){this.disposeSocket(i,l),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")},c.prototype.send=function(i){if(this.isClosed)throw new Error("WebSocket is already in CLOSING or CLOSED state.");this.ws&&this.ws.readyState===this.OPEN?this.ws.send(i):this.messageBuffer.push(i)},c.prototype.reconnect=function(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)},c.prototype.addEventListener=function(i,l){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(l)},c.prototype.dispatchEvent=function(i){return this.dispatchEventOfType(i.type,i)},c.prototype.removeEventListener=function(i,l){this.listeners[i]&&(this.listeners[i]=this.listeners[i].filter(function(h){return h!==l}))},c.prototype.openNewWebSocket=function(){var i=this;if(!this.isClosed){var l=this.options,h=l.connectTimeout,E=l.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var T=new E(this.url,this.protocols);T.onclose=function(g){return i.handleClose(g)},T.onerror=function(g){return i.handleError(g)},T.onmessage=function(g){return i.handleMessage(g)},T.onopen=function(g){return i.handleOpen(g)},this.connectTimeoutId=setTimeout(function(){i.clearConnectTimeout(),i.disposeSocket(),i.handleClose(void 0)},h),this.ws=T}},c.prototype.handleOpen=function(i){var l=this;if(this.ws&&!this.isClosed){var h=this.options.allClearResetTime;this.debugLog("WebSocket opened."),null!=this.binaryTypeInternal?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",i):(this.dispatchEventOfType("open",i),this.hasBeenOpened=!0),this.messageBuffer.forEach(function(E){return l.send(E)}),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(function(){l.clearAllClearTimeout(),l.nextRetryTime=0,l.reconnectCount=0,l.debugLog("WebSocket remained open for "+(h/1e3|0)+" seconds. Resetting retry time and count.")},h)}},c.prototype.handleMessage=function(i){this.isClosed||this.dispatchEventOfType("message",i)},c.prototype.handleClose=function(i){var l=this;if(!this.isClosed){var h=this.options,E=h.maxReconnectAttempts,T=h.shouldReconnect;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.disposeSocket()),this.dispatchEventOfType("down",i),this.reconnectCount>=E)return void this.stopReconnecting(i,this.getTooManyFailedReconnectsMessage());var g=!i||T(i);"boolean"==typeof g?this.handleWillReconnect(g,i,"Provided shouldReconnect() returned false. Closing permanently."):g.then(function(L){l.isClosed||l.handleWillReconnect(L,i,"Provided shouldReconnect() resolved to false. Closing permanently.")})}},c.prototype.handleError=function(i){this.dispatchEventOfType("error",i),this.debugLog("WebSocket encountered an error.")},c.prototype.handleWillReconnect=function(i,l,h){i?this.reestablishConnection():this.stopReconnecting(l,h)},c.prototype.reestablishConnection=function(){var i=this,l=this.options,h=l.minReconnectDelay,E=l.maxReconnectDelay,T=l.reconnectBackoffFactor;this.reconnectCount++;var g=this.nextRetryTime;this.nextRetryTime=Math.max(h,Math.min(this.nextRetryTime*T,E)),setTimeout(function(){return i.openNewWebSocket()},g),this.debugLog("WebSocket was closed. Re-opening in "+(g/1e3|0)+" seconds.")},c.prototype.stopReconnecting=function(i,l){this.debugLog(l),this.shutdown(),i&&this.dispatchEventOfType("close",i)},c.prototype.shutdown=function(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[],this.disposeSocket()},c.prototype.disposeSocket=function(i,l){!this.ws||(this.ws.onerror=w,this.ws.onclose=w,this.ws.onmessage=w,this.ws.onopen=w,this.ws.close(i,l),this.ws=void 0)},c.prototype.clearAllTimeouts=function(){this.clearConnectTimeout(),this.clearAllClearTimeout()},c.prototype.clearConnectTimeout=function(){null!=this.connectTimeoutId&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)},c.prototype.clearAllClearTimeout=function(){null!=this.allClearTimeoutId&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)},c.prototype.dispatchEventOfType=function(i,l){var h=this;switch(i){case"close":this.onclose&&this.onclose(l);break;case"error":this.onerror&&this.onerror(l);break;case"message":this.onmessage&&this.onmessage(l);break;case"open":this.onopen&&this.onopen(l);break;case"down":this.ondown&&this.ondown(l);break;case"reopen":this.onreopen&&this.onreopen(l)}return i in this.listeners&&this.listeners[i].slice().forEach(function(E){return h.callListener(E,l)}),!l||!l.defaultPrevented},c.prototype.callListener=function(i,l){"function"==typeof i?i.call(this,l):i.handleEvent.call(this,l)},c.prototype.debugLog=function(i){this.options.debug&&console.log(i)},c.prototype.getTooManyFailedReconnectsMessage=function(){var i=this.options.maxReconnectAttempts;return"Failed to reconnect after "+i+" "+function R(c,i){return 1===i?c:c+"s"}("attempt",i)+". Closing permanently."},c.DEFAULT_OPTIONS={allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function(){return!0},wsConstructor:void 0},c.CONNECTING=0,c.OPEN=1,c.CLOSING=2,c.CLOSED=3,c}();function w(){}S.Z=O},2762:(N,S,b)=>{var r;if("object"==typeof globalThis)r=globalThis;else try{r=b(8878)}catch{}finally{if(!r&&typeof window<"u"&&(r=window),!r)throw new Error("Could not determine global this")}var B=r.WebSocket||r.MozWebSocket,O=b(3386);function C(k,R){return R?new B(k,R):new B(k)}B&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(k){Object.defineProperty(C,k,{get:function(){return B[k]}})}),N.exports={w3cwebsocket:B?C:null,version:O}},3386:(N,S,b)=>{N.exports=b(9794).version},9794:N=>{"use strict";N.exports={version:"1.0.34"}}}]);