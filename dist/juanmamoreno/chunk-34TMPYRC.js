import{a as m,b as h,c as _}from"./chunk-HQ2CTYMO.js";import{l as d}from"./chunk-M2AMYXAA.js";var o=m({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),A={state:o,subscribe(e){return h(o,()=>e(o))},push(e,t){e!==o.view&&(o.view=e,t&&(o.data=t),o.history.push(e))},reset(e){o.view=e,o.history=[e]},replace(e){o.history.length>1&&(o.history[o.history.length-1]=e,o.view=e)},goBack(){if(o.history.length>1){o.history.pop();let[e]=o.history.slice(-1);o.view=e}},setData(e){o.data=e}},i={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return i.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){let e=navigator.userAgent.toLowerCase();return i.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,s){if(i.isHttpUrl(e))return this.formatUniversalUrl(e,t,s);let a=e;a.includes("://")||(a=e.replaceAll("/","").replaceAll(":",""),a=`${a}://`),a.endsWith("/")||(a=`${a}/`),this.setWalletConnectDeepLink(a,s);let r=encodeURIComponent(t);return`${a}wc?uri=${r}`},formatUniversalUrl(e,t,s){if(!i.isHttpUrl(e))return this.formatNativeUrl(e,t,s);let a=e;a.endsWith("/")||(a=`${a}/`),this.setWalletConnectDeepLink(a,s);let r=encodeURIComponent(t);return`${a}wc?uri=${r}`},wait(e){return d(this,null,function*(){return new Promise(t=>{setTimeout(t,e)})})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(i.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{let[t]=e.split("?");localStorage.setItem(i.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(i.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(i.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;let t=(e=A.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;let t=(e=A.state.data)==null?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag(){return typeof location<"u"?new URLSearchParams(location.search).has(i.W3M_PREFER_INJECTED_URL_FLAG):!1}},P,f={ethereumClient:void 0,setEthereumClient(e){P=e},client(){if(P)return P;throw new Error("ClientCtrl has no client set")}},F=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),c=m({enabled:F,userSessionId:"",events:[],connectedWalletId:void 0}),J={state:c,subscribe(e){return h(c.events,()=>e(_(c.events[c.events.length-1])))},initialize(){c.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(c.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){c.connectedWalletId=e},click(e){if(c.enabled){let t={type:"CLICK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},track(e){if(c.enabled){let t={type:"TRACK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},view(e){if(c.enabled){let t={type:"VIEW",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}}},u=m({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),I={state:u,subscribe(e){return h(u,()=>e(u))},setChains(e){u.chains=e},getSelectedChain(){let e=f.client().getNetwork().chain;return e&&(u.selectedChain=e),u.selectedChain},setSelectedChain(e){u.selectedChain=e},setIsCustomDesktop(e){u.isCustomDesktop=e},setIsCustomMobile(e){u.isCustomMobile=e},setIsDataLoaded(e){u.isDataLoaded=e},setIsUiLoaded(e){u.isUiLoaded=e},setIsPreferInjected(e){u.isPreferInjected=e}},N=m({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),b={state:N,subscribe(e){return h(N,()=>e(N))},setConfig(e){var t,s;J.initialize(),I.setIsCustomMobile(!!((t=e.mobileWallets)!=null&&t.length)),I.setIsCustomDesktop(!!((s=e.desktopWallets)!=null&&s.length)),I.setChains(f.client().chains),I.setIsPreferInjected(f.client().isInjectedProviderInstalled()&&i.isPreferInjectedFlag()),e.defaultChain&&I.setSelectedChain(e.defaultChain),i.setWeb3ModalVersionInStorage(),Object.assign(N,e)}},z="eip155",G="https://rpc.walletconnect.com",q={getIdentity(e,t){return d(this,null,function*(){let{projectId:s}=b.state,a=`${z}:${t}`,r=`${G}/v1/identity/${e}?chainId=${a}&projectId=${s}`;return(yield fetch(r)).json()})}},n=m({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),Q={state:n,subscribe(e){return h(n,()=>e(n))},getAccount(){let e=f.client().getAccount();n.address=e.address,n.isConnected=e.isConnected},fetchProfile(e,t){return d(this,null,function*(){var s;try{n.profileLoading=!0,n.profileName=null,n.profileAvatar=null;let a=t??n.address,r=1,p=(s=I.state.chains)==null?void 0:s.find(l=>l.id===r);if(a&&p){try{let l=yield q.getIdentity(a,r);n.profileName=l.name,n.profileAvatar=l.avatar}catch{let l=yield f.client().fetchEnsName({address:a,chainId:r});if(n.profileName=l,l){let C=yield f.client().fetchEnsAvatar({name:l,chainId:r});n.profileAvatar=C}}n.profileAvatar&&(yield e(n.profileAvatar))}}finally{n.profileLoading=!1}})},fetchBalance(e){return d(this,null,function*(){try{let{chain:t}=f.client().getNetwork(),{tokenContracts:s}=b.state,a;t&&s&&(a=s[t.id]),n.balanceLoading=!0;let r=e??n.address;if(r){let p=yield f.client().fetchBalance({address:r,token:a});n.balance={amount:p.formatted,symbol:p.symbol}}}finally{n.balanceLoading=!1}})},setAddress(e){n.address=e},setIsConnected(e){n.isConnected=e},resetBalance(){n.balance=void 0},resetAccount(){n.address=void 0,n.isConnected=!1,n.profileName=void 0,n.profileAvatar=void 0,n.balance=void 0}},X=Object.defineProperty,R=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,$=(e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ee=(e,t)=>{for(var s in t||(t={}))Y.call(t,s)&&$(e,s,t[s]);if(R)for(var s of R(t))Z.call(t,s)&&$(e,s,t[s]);return e},M="https://explorer-api.walletconnect.com",S="w3m",T="js-2.7.1";function U(e,t){return d(this,null,function*(){let s=ee({sdkType:S,sdkVersion:T},t),a=new URL(e,M);return a.searchParams.append("projectId",b.state.projectId),Object.entries(s).forEach(([r,p])=>{p&&a.searchParams.append(r,String(p))}),(yield fetch(a)).json()})}var v={getDesktopListings(e){return d(this,null,function*(){return U("/w3m/v1/getDesktopListings",e)})},getMobileListings(e){return d(this,null,function*(){return U("/w3m/v1/getMobileListings",e)})},getInjectedListings(e){return d(this,null,function*(){return U("/w3m/v1/getInjectedListings",e)})},getAllListings(e){return d(this,null,function*(){return U("/w3m/v1/getAllListings",e)})},getWalletImageUrl(e){return`${M}/w3m/v1/getWalletImage/${e}?projectId=${b.state.projectId}&sdkType=${S}&sdkVersion=${T}`},getAssetImageUrl(e){return`${M}/w3m/v1/getAssetImage/${e}?projectId=${b.state.projectId}&sdkType=${S}&sdkVersion=${T}`}},te=Object.defineProperty,x=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,V=(e,t,s)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ne=(e,t)=>{for(var s in t||(t={}))se.call(t,s)&&V(e,s,t[s]);if(x)for(var s of x(t))ae.call(t,s)&&V(e,s,t[s]);return e},B=i.isMobile(),g=m({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),pe={state:g,getRecomendedWallets(){return d(this,null,function*(){let{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=b.state;if(e==="NONE"||t==="ALL"&&!e)return g.recomendedWallets;if(i.isArray(e)){let s={recommendedIds:e.join(",")},{listings:a}=yield v.getAllListings(s),r=Object.values(a);r.sort((p,l)=>{let C=e.indexOf(p.id),y=e.indexOf(l.id);return C-y}),g.recomendedWallets=r}else{let s=i.isArray(t),a={page:1,entries:i.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:s?t.join(","):void 0},{listings:r}=B?yield v.getMobileListings(a):yield v.getDesktopListings(a);g.recomendedWallets=Object.values(r)}return g.recomendedWallets})},getWallets(e){return d(this,null,function*(){let t=ne({},e),{explorerRecommendedWalletIds:s,explorerExcludedWalletIds:a}=b.state,{recomendedWallets:r}=g;if(a==="ALL")return g.wallets;r.length?t.excludedIds=r.map(k=>k.id).join(","):i.isArray(s)&&(t.excludedIds=s.join(",")),i.isArray(a)&&(t.excludedIds=[t.excludedIds,a].filter(Boolean).join(","));let{page:p,search:l}=e,{listings:C,total:y}=B?yield v.getMobileListings(t):yield v.getDesktopListings(t),E=Object.values(C),j=l?"search":"wallets";return g[j]={listings:[...g[j].listings,...E],total:y,page:p??1},{listings:E,total:y}})},getInjectedWallets(){return d(this,null,function*(){let{listings:e}=yield v.getInjectedListings({}),t=Object.values(e);return g.injectedWallets=t,g.injectedWallets})},getWalletImageUrl(e){return v.getWalletImageUrl(e)},getAssetImageUrl(e){return v.getAssetImageUrl(e)},resetSearch(){g.search={listings:[],total:0,page:1}}},L=m({pairingEnabled:!1,pairingUri:"",pairingError:!1}),D={state:L,subscribe(e){return h(L,()=>e(L))},setPairingUri(e){L.pairingUri=e},setPairingError(e){L.pairingError=e},setPairingEnabled(e){L.pairingEnabled=e}},W=m({open:!1}),ue={state:W,subscribe(e){return h(W,()=>e(W))},open(e){return d(this,null,function*(){return new Promise(t=>{let{isUiLoaded:s,isDataLoaded:a,isPreferInjected:r,selectedChain:p}=I.state,{isConnected:l}=Q.state,{enableNetworkView:C}=b.state;if(D.setPairingEnabled(!0),l||i.removeWalletConnectDeepLink(),e!=null&&e.route)A.reset(e.route);else if(l)A.reset("Account");else if(C)A.reset("SelectNetwork");else if(r){f.client().connectConnector("injected",p?.id).catch(E=>console.error(E)),t();return}else A.reset("ConnectWallet");let{pairingUri:y}=D.state;if(s&&a&&(y||l))W.open=!0,t();else{let E=setInterval(()=>{let j=I.state,k=D.state;j.isUiLoaded&&j.isDataLoaded&&(k.pairingUri||l)&&(clearInterval(E),W.open=!0,t())},200)}})})},close(){W.open=!1}},re=Object.defineProperty,H=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,K=(e,t,s)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,le=(e,t)=>{for(var s in t||(t={}))oe.call(t,s)&&K(e,s,t[s]);if(H)for(var s of H(t))ie.call(t,s)&&K(e,s,t[s]);return e};function ce(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}var O=m({themeMode:ce()?"dark":"light"}),ge={state:O,subscribe(e){return h(O,()=>e(O))},setThemeConfig(e){let{themeMode:t,themeVariables:s}=e;t&&(O.themeMode=t),s&&(O.themeVariables=le({},s))}},w=m({open:!1,message:"",variant:"success"}),me={state:w,subscribe(e){return h(w,()=>e(w))},openToast(e,t){w.open=!0,w.message=e,w.variant=t},closeToast(){w.open=!1}};export{A as a,i as b,f as c,J as d,I as e,b as f,Q as g,pe as h,D as i,ue as j,ge as k,me as l};
